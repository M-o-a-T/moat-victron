from victron.inv._util import balance

def pr(a,b, **kw):
	r=balance(a,**kw)
	assert r == b

def test_balance():
	pr( [50, 10, 100], [50, 10, 100])
	pr( [50, -10, 100], [45, 0, 95])
	pr( [50, -10, 100], [55, 10, 75], max=75)
	pr( [50, -10, 100], [60, 20, 60], max=60)
	pr( [50, -10, 100], [45, 0, 95], min=0)
	pr( [-50, -10, 100], [0, 0, 40])
	pr( [50, -10, -100], [0, 0, -60])
	pr( [-50, -10, -100], [-50, -10, -100])
	pr( [-50, -10, -100], [-50, -10, -100], max=0)
	pr( [-50, -10, -100], [0, 0, 0], min=0)
	pr( [-50, -10, -100], [-60, -20, -80], min=-80)

